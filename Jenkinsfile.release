#!/usr/bin/groovy
@Library('github.com/fabric8io/fabric8-pipeline-library@master')
def utils = new io.fabric8.Utils()
mavenNode {
  checkout scm
  if (utils.isCI()) {
    echo 'CI provided by the Jenkins organisation'
  } else if (utils.isCD()) {
    sh "git remote set-url origin git@github.com:jenkinsci/updatebot-plugin.git"
    stage('release'){
      container('maven'){
        sh 'mvn release:prepare release:perform'
      }
    }
  }
}